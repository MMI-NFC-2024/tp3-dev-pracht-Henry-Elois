---
import Layout from "../layouts/Layout.astro";
import GraphicSpecies from "../components/GraphicSpecies.astro";
import penguins from "../assets/penguins.json";

const penguinsAdelie = penguins.filter((p) => p.species === "Adelie");
const penguinsGentoo = penguins.filter((p) => p.species === "Gentoo");
const penguinsChinstrap = penguins.filter((p) => p.species === "Chinstrap");
---

<Layout>
  <div class="p-4">
    <h1 class="text-2xl font-bold mb-4">Navigation entre les espèces</h1>

    <div class="mb-6">
      <label for="species-slider" class="sr-only">Choisir une espèce</label>
      <select
        id="species-slider"
        class="bg-gray-200 px-3 py-2 rounded-md border border-gray-400"
      >
        <option value="adelie">Adelie</option>
        <option value="gentoo">Gentoo</option>
        <option value="chinstrap">Chinstrap</option>
      </select>
    </div>

    <div class="slider-container">
      <section id="adelie" class="slide">
        <h2 class="text-xl font-semibold mb-2">Les penguins Adelie</h2>
        <GraphicSpecies species="Adelie" />
      </section>

      <section id="gentoo" class="slide">
        <h2 class="text-xl font-semibold mb-2">Gentoo</h2>
        <GraphicSpecies species="Gentoo" />
      </section>

      <section id="chinstrap" class="slide">
        <h2 class="text-xl font-semibold mb-2">Chinstrap</h2>
        <GraphicSpecies species="Chinstrap" />
      </section>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const select = document.getElementById("species-slider");
      if (select) {
        select.addEventListener("change", (evt) => {
          const value = evt.target.value;
          location.hash = value;
        });
      }
    });
  </script>

</Layout>

<style>
  .slider-container {
    display: flex;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    width: 100%;
  }

  .slide {
    flex: 0 0 100%;
    scroll-snap-align: start;
    padding: 1rem;
    box-sizing: border-box;
  }
</style>
